{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\AMX1\\\\Downloads\\\\Repo\\\\OAD_Auto\\\\ous_agile_devops_ai\\\\oad_ai\\\\oad_ai_frontend\\\\src\\\\UploadDocument.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UploadDocument = () => {\n  _s();\n  const {\n    sourceName\n  } = useParams();\n  const [file, setFile] = useState(null);\n  const [message, setMessage] = useState('');\n  const [documents, setDocuments] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    fetchDocuments();\n  }, []);\n  const fetchDocuments = async () => {\n    try {\n      const response = await axios.get(`/get-documents/${sourceName}/`);\n      console.log('Documents fetch response:', response.data);\n      if (response.data && response.data.documents) {\n        setDocuments(response.data.documents);\n      } else {\n        setError('Unexpected response structure');\n      }\n    } catch (err) {\n      setError('Failed to fetch documents.');\n    }\n  };\n  const handleFileChange = e => {\n    setFile(e.target.files[0]);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage('');\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('source_name', sourceName);\n    try {\n      const response = await axios.post('/upload-document/', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      if (response.data.status === 'success') {\n        setMessage('File uploaded successfully.');\n        fetchDocuments(); // Refresh the document list after upload\n      } else {\n        setMessage('File upload failed.');\n      }\n    } catch (err) {\n      setMessage('An error occurred during file upload.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Upload Document to \", sourceName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: handleFileChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        children: loading ? 'Uploading...' : 'Upload'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 25\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Documents in \", sourceName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: documents.map((doc, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: doc.file_url,\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          children: doc.file_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n};\n_s(UploadDocument, \"7UbLB9/FmpnpTySuKpmGrqB3y4Q=\", false, function () {\n  return [useParams];\n});\n_c = UploadDocument;\nexport default UploadDocument;\nvar _c;\n$RefreshReg$(_c, \"UploadDocument\");","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","jsxDEV","_jsxDEV","UploadDocument","_s","sourceName","file","setFile","message","setMessage","documents","setDocuments","loading","setLoading","error","setError","fetchDocuments","response","get","console","log","data","err","handleFileChange","e","target","files","handleSubmit","preventDefault","formData","FormData","append","post","headers","status","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","disabled","map","doc","index","href","file_url","rel","file_name","_c","$RefreshReg$"],"sources":["C:/Users/AMX1/Downloads/Repo/OAD_Auto/ous_agile_devops_ai/oad_ai/oad_ai_frontend/src/UploadDocument.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nconst UploadDocument = () => {\r\n    const { sourceName } = useParams();\r\n    const [file, setFile] = useState(null);\r\n    const [message, setMessage] = useState('');\r\n    const [documents, setDocuments] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        fetchDocuments();\r\n    }, []);\r\n\r\n    const fetchDocuments = async () => {\r\n        try {\r\n            const response = await axios.get(`/get-documents/${sourceName}/`);\r\n            console.log('Documents fetch response:', response.data);\r\n            if (response.data && response.data.documents) {\r\n                setDocuments(response.data.documents);\r\n            } else {\r\n                setError('Unexpected response structure');\r\n            }\r\n        } catch (err) {\r\n            setError('Failed to fetch documents.');\r\n        }\r\n    };\r\n\r\n    const handleFileChange = (e) => {\r\n        setFile(e.target.files[0]);\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setMessage('');\r\n\r\n        const formData = new FormData();\r\n        formData.append('file', file);\r\n        formData.append('source_name', sourceName);\r\n\r\n        try {\r\n            const response = await axios.post('/upload-document/', formData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data',\r\n                },\r\n            });\r\n\r\n            if (response.data.status === 'success') {\r\n                setMessage('File uploaded successfully.');\r\n                fetchDocuments();  // Refresh the document list after upload\r\n            } else {\r\n                setMessage('File upload failed.');\r\n            }\r\n        } catch (err) {\r\n            setMessage('An error occurred during file upload.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h1>Upload Document to {sourceName}</h1>\r\n\r\n            <form onSubmit={handleSubmit}>\r\n                <input type=\"file\" onChange={handleFileChange} />\r\n                <button type=\"submit\" disabled={loading}>\r\n                    {loading ? 'Uploading...' : 'Upload'}\r\n                </button>\r\n            </form>\r\n\r\n            {message && <p>{message}</p>}\r\n            {error && <p>{error}</p>}\r\n\r\n            <h2>Documents in {sourceName}</h2>\r\n            <ul>\r\n                {documents.map((doc, index) => (\r\n                    <li key={index}>\r\n                        <a href={doc.file_url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                            {doc.file_name}\r\n                        </a>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UploadDocument;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}